<ion-header translucent="true">
  <ion-toolbar>
    <ion-title>Résultats</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen="true">
  <div class="page results-page" *ngIf="result as testResult; else emptyState">
    <section class="summary surface-card">
      <div>
        <p class="eyebrow">Ton langage dominant</p>
        <h1 *ngIf="primaryLanguage as primary">{{ primary.label }}</h1>
        <p class="lead" *ngIf="primaryLanguage as primary">{{ primary.descriptionCourte }}</p>
      </div>
      <div class="chips" *ngIf="secondaryLanguage as secondary">
        <p class="eyebrow">Langage secondaire</p>
        <span>{{ secondary.label }}</span>
        <p>{{ secondary.descriptionCourte }}</p>
      </div>
    </section>

    <section class="chart-card surface-card">
      <div class="card-head">
        <p class="eyebrow">Répartition détaillée</p>
        <ion-button size="small" fill="clear" (click)="restartQuiz()">
          Refaire le test
        </ion-button>
      </div>
      <app-chart [scores]="testResult.scores"></app-chart>
    </section>

    <section class="insight surface-card" *ngIf="resultMessage">
      <p class="eyebrow">Interprétation</p>
      <p>{{ resultMessage }}</p>
    </section>

    <section class="actions">
      <ion-button expand="block" color="primary" (click)="goToGestures()">
        <ion-icon slot="start" name="gift-outline"></ion-icon>
        Voir les gestes d'attention adaptés
      </ion-button>
      <ion-button expand="block" fill="clear" (click)="restartQuiz()">
        <ion-icon slot="start" name="arrow-forward"></ion-icon>
        Refaire le test
      </ion-button>
    </section>
  </div>

  <ng-template #emptyState>
    <div class="empty surface-card">
      <ion-icon name="stats-chart-outline"></ion-icon>
      <p>Aucun résultat pour le moment. Lance ton premier test !</p>
      <ion-button (click)="restartQuiz()">Commencer le test</ion-button>
    </div>
  </ng-template>
</ion-content>
